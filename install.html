<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installation Guide - SessionCast</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="docs.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <span class="logo-icon">></span>
                <span class="logo-text">SessionCast</span>
            </a>
            <ul class="nav-menu">
                <li><a href="/#features">Features</a></li>
                <li><a href="install.html" class="active">Installation</a></li>
                <li><a href="guide.html">Usage Guide</a></li>
                <li><a href="https://github.com/sessioncast" target="_blank" class="nav-github">GitHub</a></li>
                <li class="lang-switch">
                    <a href="install.html" class="active">EN</a>
                    <a href="ko/install.html">KO</a>
                </li>
            </ul>
            <button class="nav-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="docs-main">
        <aside class="docs-sidebar">
            <nav class="docs-nav">
                <h3>Installation</h3>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#prerequisites">Prerequisites</a></li>
                    <li><a href="#relay-server">Relay Server</a></li>
                    <li><a href="#web-client">Web Client</a></li>
                    <li><a href="#agent">Agent</a></li>
                    <li><a href="#configuration">Configuration</a></li>
                </ul>
            </nav>
        </aside>

        <article class="docs-content">
            <header class="docs-header">
                <h1>Installation Guide</h1>
                <p>Step-by-step guide to install and configure SessionCast.</p>
            </header>

            <section id="overview" class="docs-section">
                <h2>Overview</h2>
                <p>SessionCast consists of three main components:</p>

                <div class="component-cards">
                    <div class="component-card">
                        <div class="component-icon server-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>
                                <rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>
                                <line x1="6" y1="6" x2="6.01" y2="6"/>
                                <line x1="6" y1="18" x2="6.01" y2="18"/>
                            </svg>
                        </div>
                        <h3>Relay Server</h3>
                        <p>Relays WebSocket communication between Agent and Web Client, managing authentication.</p>
                    </div>

                    <div class="component-card">
                        <div class="component-icon web-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="2" y1="12" x2="22" y2="12"/>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                            </svg>
                        </div>
                        <h3>Web Client</h3>
                        <p>React-based web application for viewing and interacting with terminal sessions in the browser.</p>
                    </div>

                    <div class="component-card">
                        <div class="component-icon agent-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="4" y="4" width="16" height="16" rx="2"/>
                                <line x1="9" y1="9" x2="15" y2="9"/>
                                <line x1="9" y1="13" x2="15" y2="13"/>
                                <line x1="9" y1="17" x2="13" y2="17"/>
                            </svg>
                        </div>
                        <h3>Agent</h3>
                        <p>Runs on your local machine to capture tmux sessions and stream them to the Relay Server.</p>
                    </div>
                </div>
            </section>

            <section id="prerequisites" class="docs-section">
                <h2>Prerequisites</h2>

                <h3>Relay Server & Web Client</h3>
                <ul class="prereq-list">
                    <li>Java 17 or higher (Relay Server)</li>
                    <li>Node.js 18 or higher (for Web Client build)</li>
                    <li>Docker (optional)</li>
                    <li>OAuth 2.0 Client ID from Google Cloud Console</li>
                </ul>

                <h3>Agent</h3>
                <ul class="prereq-list">
                    <li>Java 17 or higher</li>
                    <li>tmux installed</li>
                    <li>Linux or macOS</li>
                </ul>
            </section>

            <section id="relay-server" class="docs-section">
                <h2>Relay Server Installation</h2>

                <h3>Option 1: Docker (Recommended)</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Docker</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Pull image
docker pull ghcr.io/sessioncast/server:latest

# Run with environment variables
docker run -d \
  --name sessioncast-server \
  -p 8080:8080 \
  -e GOOGLE_CLIENT_ID=your-client-id \
  -e GOOGLE_CLIENT_SECRET=your-client-secret \
  -e JWT_SECRET=your-jwt-secret-key-at-least-256-bits \
  -e FRONTEND_URL=https://your-domain.com \
  -e CORS_ORIGINS=https://your-domain.com \
  ghcr.io/sessioncast/server:latest</code></pre>
                </div>

                <h3>Option 2: Build from Source</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Bash</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Clone repository
git clone https://github.com/sessioncast/server.git
cd server

# Build
./gradlew build -x test

# Run
java -jar build/libs/relay-0.0.1-SNAPSHOT.jar</code></pre>
                </div>

                <h3>Option 3: systemd Service (Linux)</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>/etc/systemd/system/sessioncast.service</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code>[Unit]
Description=SessionCast Relay Server
After=network.target

[Service]
Type=simple
User=sessioncast
WorkingDirectory=/opt/sessioncast
ExecStart=/usr/bin/java -jar /opt/sessioncast/relay.jar
Restart=always
RestartSec=10

Environment=GOOGLE_CLIENT_ID=your-client-id
Environment=GOOGLE_CLIENT_SECRET=your-client-secret
Environment=JWT_SECRET=your-jwt-secret-key
Environment=FRONTEND_URL=https://your-domain.com

[Install]
WantedBy=multi-user.target</code></pre>
                </div>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Service Management</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Enable and start service
sudo systemctl daemon-reload
sudo systemctl enable sessioncast
sudo systemctl start sessioncast

# Check status
sudo systemctl status sessioncast</code></pre>
                </div>

                <div class="info-box">
                    <h4>Google OAuth Setup</h4>
                    <ol>
                        <li>Create a project in <a href="https://console.cloud.google.com" target="_blank">Google Cloud Console</a></li>
                        <li>Create OAuth 2.0 Client ID (Web application type)</li>
                        <li>Add authorized redirect URI: <code>https://your-domain.com/login/oauth2/code/google</code></li>
                        <li>Set Client ID and Client Secret as environment variables</li>
                    </ol>
                </div>
            </section>

            <section id="web-client" class="docs-section">
                <h2>Web Client Installation</h2>

                <p>Web Client can be deployed together with the Relay Server or on separate static hosting.</p>

                <h3>Build from Source</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Bash</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Clone repository
git clone https://github.com/sessioncast/web.git
cd web

# Install dependencies
npm install

# Create environment file
cat > .env << EOF
VITE_API_URL=https://your-relay-server.com
VITE_WS_URL=wss://your-relay-server.com/ws
EOF

# Build for production
npm run build

# Output is in 'dist' folder</code></pre>
                </div>

                <h3>Nginx Configuration</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>/etc/nginx/sites-available/sessioncast</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code>server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;

    # Serve static files
    root /var/www/sessioncast;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # Proxy API requests to relay server
    location /api/ {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # WebSocket proxy
    location /ws {
        proxy_pass http://localhost:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_read_timeout 86400;
    }
}</code></pre>
                </div>
            </section>

            <section id="agent" class="docs-section">
                <h2>Agent Installation</h2>

                <h3>Build from Source</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Bash</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Clone repository
git clone https://github.com/sessioncast/agent.git
cd agent

# Build
./gradlew build -x test

# Copy jar to desired location
cp build/libs/agent-0.0.1-SNAPSHOT.jar ~/sessioncast-agent.jar</code></pre>
                </div>

                <h3>Generate Agent Token</h3>
                <p>The Agent needs a token to connect to the Relay Server. Add a token to the Relay Server's <code>agent-tokens.json</code>:</p>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>agent-tokens.json</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code>{
  "tokens": {
    "agt_your_secure_token_here": {
      "owner": "your.email@gmail.com",
      "label": "My Workstation",
      "createdAt": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                </div>

                <div class="warning-box">
                    <h4>Security Warning</h4>
                    <p>Agent Token is sensitive information. Only share through secure channels and never commit to public repositories.</p>
                </div>

                <h3>Agent Configuration</h3>
                <p>Create a <code>.tmux-remote.yml</code> file in your home directory:</p>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>~/.tmux-remote.yml</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Machine identifier (unique per machine)
machineId: my-workstation

# Relay server WebSocket URL
relay: wss://your-relay-server.com/ws

# Agent token for authentication
token: agt_your_secure_token_here

# Auto-discovery: automatically detect tmux sessions
autoDiscovery: true

# Or manually specify sessions:
# sessions:
#   - id: my-workstation/dev
#     tmuxSession: dev
#     label: "Development"
#   - id: my-workstation/work
#     tmuxSession: work
#     label: "Work Projects"</code></pre>
                </div>

                <h3>Running the Agent</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Bash</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Run directly
java -jar ~/sessioncast-agent.jar

# Or run in background with nohup
nohup java -jar ~/sessioncast-agent.jar > ~/sessioncast-agent.log 2>&1 &</code></pre>
                </div>

                <h3>launchd Service (macOS)</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>~/Library/LaunchAgents/com.sessioncast.agent.plist</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"
  "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;com.sessioncast.agent&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/usr/bin/java&lt;/string&gt;
        &lt;string&gt;-jar&lt;/string&gt;
        &lt;string&gt;/Users/YOUR_USERNAME/sessioncast-agent.jar&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;RunAtLoad&lt;/key&gt;
    &lt;true/&gt;
    &lt;key&gt;KeepAlive&lt;/key&gt;
    &lt;true/&gt;
    &lt;key&gt;StandardOutPath&lt;/key&gt;
    &lt;string&gt;/Users/YOUR_USERNAME/Library/Logs/sessioncast-agent.log&lt;/string&gt;
    &lt;key&gt;StandardErrorPath&lt;/key&gt;
    &lt;string&gt;/Users/YOUR_USERNAME/Library/Logs/sessioncast-agent.error.log&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;</code></pre>
                </div>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Load Service</span>
                        <button class="copy-btn" data-clipboard>Copy</button>
                    </div>
                    <pre class="code-block"><code># Load the service
launchctl load ~/Library/LaunchAgents/com.sessioncast.agent.plist

# Check status
launchctl list | grep sessioncast

# Unload if needed
launchctl unload ~/Library/LaunchAgents/com.sessioncast.agent.plist</code></pre>
                </div>
            </section>

            <section id="configuration" class="docs-section">
                <h2>Configuration Reference</h2>

                <h3>Relay Server Environment Variables</h3>
                <div class="config-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Variable</th>
                                <th>Description</th>
                                <th>Default</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>GOOGLE_CLIENT_ID</code></td>
                                <td>Google OAuth 2.0 Client ID</td>
                                <td>Required</td>
                            </tr>
                            <tr>
                                <td><code>GOOGLE_CLIENT_SECRET</code></td>
                                <td>Google OAuth 2.0 Client Secret</td>
                                <td>Required</td>
                            </tr>
                            <tr>
                                <td><code>JWT_SECRET</code></td>
                                <td>JWT signing key (minimum 256 bits)</td>
                                <td>Required</td>
                            </tr>
                            <tr>
                                <td><code>FRONTEND_URL</code></td>
                                <td>Web Client URL</td>
                                <td>http://localhost:3000</td>
                            </tr>
                            <tr>
                                <td><code>CORS_ORIGINS</code></td>
                                <td>Allowed CORS origins (comma-separated)</td>
                                <td>http://localhost:3000</td>
                            </tr>
                            <tr>
                                <td><code>ALLOWED_DOMAINS</code></td>
                                <td>Allowed email domains (comma-separated)</td>
                                <td>All domains allowed</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Agent Configuration (YAML)</h3>
                <div class="config-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Property</th>
                                <th>Description</th>
                                <th>Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>machineId</code></td>
                                <td>Unique machine identifier</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td><code>relay</code></td>
                                <td>Relay Server WebSocket URL</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td><code>token</code></td>
                                <td>Agent authentication token</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td><code>autoDiscovery</code></td>
                                <td>Auto-detect tmux sessions</td>
                                <td>No (default: false)</td>
                            </tr>
                            <tr>
                                <td><code>sessions</code></td>
                                <td>Manual session configuration list</td>
                                <td>No</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <nav class="docs-pagination">
                <a href="/" class="prev-link">
                    <span class="arrow">←</span>
                    <span>Home</span>
                </a>
                <a href="guide.html" class="next-link">
                    <span>Usage Guide</span>
                    <span class="arrow">→</span>
                </a>
            </nav>
        </article>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 SessionCast. Released under MIT License.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="docs.js"></script>
</body>
</html>
