<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사용 가이드 - SessionCast</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../docs.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/ko/" class="nav-logo">
                <span class="logo-icon">></span>
                <span class="logo-text">SessionCast</span>
            </a>
            <ul class="nav-menu">
                <li><a href="/ko/#features">기능</a></li>
                <li><a href="pricing.html">가격</a></li>
                <li><a href="install.html">설치 가이드</a></li>
                <li><a href="guide.html" class="active">사용 가이드</a></li>
                <li><a href="https://github.com/sessioncast" target="_blank" class="nav-github">GitHub</a></li>
                <li class="lang-switch">
                    <a href="../guide.html">EN</a>
                    <a href="guide.html" class="active">KO</a>
                </li>
                <li class="nav-console">
                    <a href="https://app.sessioncast.io?lang=ko" class="btn-console">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <rect x="2" y="3" width="20" height="14" rx="2"/>
                            <path d="M8 21h8"/>
                            <path d="M12 17v4"/>
                            <path d="M7 8l3 3-3 3"/>
                            <path d="M13 14h4"/>
                        </svg>
                        콘솔
                    </a>
                </li>
            </ul>
            <button class="nav-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="docs-main">
        <aside class="docs-sidebar">
            <nav class="docs-nav">
                <h3>사용 가이드</h3>
                <ul>
                    <li><a href="#getting-started">시작하기</a></li>
                    <li><a href="#tmux-sessions">tmux 세션</a></li>
                    <li><a href="#web-interface">웹 인터페이스</a></li>
                    <li><a href="#keyboard-input">키보드 입력</a></li>
                    <li><a href="#session-management">세션 관리</a></li>
                    <li><a href="#troubleshooting">문제 해결</a></li>
                </ul>
            </nav>
        </aside>

        <article class="docs-content">
            <header class="docs-header">
                <h1>사용 가이드</h1>
                <p>SessionCast를 효과적으로 사용하는 방법을 알아봅니다.</p>
            </header>

            <section id="getting-started" class="docs-section">
                <h2>시작하기</h2>

                <h3>기본 워크플로우</h3>
                <div class="workflow-steps">
                    <div class="workflow-step">
                        <div class="step-icon">1</div>
                        <div class="step-content">
                            <h4>tmux 세션 생성</h4>
                            <p>로컬 머신에서 tmux 세션을 생성합니다.</p>
                            <div class="code-block-wrapper">
                                <pre class="code-block"><code>tmux new -s workspace</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step">
                        <div class="step-icon">2</div>
                        <div class="step-content">
                            <h4>Agent 확인</h4>
                            <p>Agent가 실행 중이면 자동으로 세션이 감지됩니다.</p>
                            <div class="code-block-wrapper">
                                <pre class="code-block"><code># Agent 로그 확인
tail -f ~/sessioncast-agent.log

# 세션 등록 메시지 확인
# "Session 'workspace' registered" 출력 확인</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step">
                        <div class="step-icon">3</div>
                        <div class="step-content">
                            <h4>웹에서 접속</h4>
                            <p>브라우저에서 SessionCast 웹에 접속하고 Google 계정으로 로그인합니다.</p>
                        </div>
                    </div>

                    <div class="workflow-step">
                        <div class="step-icon">4</div>
                        <div class="step-content">
                            <h4>세션 선택 및 사용</h4>
                            <p>세션 목록에서 원하는 세션을 클릭하면 터미널이 표시됩니다.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tmux-sessions" class="docs-section">
                <h2>tmux 세션</h2>

                <h3>세션 생성</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>tmux 기본 명령어</span>
                    </div>
                    <pre class="code-block"><code># 새 세션 생성
tmux new -s session-name

# 백그라운드로 세션 생성
tmux new -d -s session-name

# 세션에 창(window) 추가
tmux new-window -t session-name

# 세션 목록 확인
tmux ls</code></pre>
                </div>

                <h3>세션 이름 규칙</h3>
                <p>SessionCast에서 세션은 <code>machineId/tmuxSession</code> 형식으로 식별됩니다:</p>
                <ul class="feature-list">
                    <li><code>my-workstation/dev</code> - my-workstation 머신의 dev 세션</li>
                    <li><code>server-01/monitoring</code> - server-01 머신의 monitoring 세션</li>
                </ul>

                <h3>Auto-Discovery 모드</h3>
                <p><code>autoDiscovery: true</code>를 설정하면 Agent가 자동으로 모든 tmux 세션을 감지합니다:</p>
                <div class="code-block-wrapper">
                    <pre class="code-block"><code># ~/.tmux-remote.yml
machineId: my-workstation
relay: wss://your-server.com/ws
token: agt_your_token
autoDiscovery: true</code></pre>
                </div>

                <div class="info-box">
                    <h4>Auto-Discovery 제외</h4>
                    <p>특정 세션을 제외하려면 세션 이름 앞에 <code>_</code> (언더스코어)를 붙이세요:</p>
                    <pre><code>tmux new -s _private-session</code></pre>
                </div>
            </section>

            <section id="web-interface" class="docs-section">
                <h2>웹 인터페이스</h2>

                <h3>로그인</h3>
                <p>SessionCast는 Google OAuth 2.0을 사용합니다:</p>
                <ol>
                    <li>웹 페이지에서 "Sign in with Google" 버튼 클릭</li>
                    <li>Google 계정 선택 및 인증</li>
                    <li>자동으로 세션 목록 페이지로 이동</li>
                </ol>

                <div class="info-box">
                    <h4>도메인 제한</h4>
                    <p>관리자가 <code>ALLOWED_DOMAINS</code>를 설정한 경우, 해당 도메인의 이메일만 접속할 수 있습니다.</p>
                </div>

                <h3>세션 목록</h3>
                <p>로그인 후 자신의 Agent Token으로 등록된 세션만 표시됩니다:</p>
                <ul class="feature-list">
                    <li><strong>세션 라벨</strong>: 설정된 라벨 또는 tmux 세션 이름</li>
                    <li><strong>머신 ID</strong>: 세션이 실행 중인 머신</li>
                    <li><strong>상태 표시</strong>: 연결됨/연결 해제됨</li>
                </ul>

                <h3>터미널 뷰</h3>
                <p>세션을 클릭하면 터미널 화면이 표시됩니다:</p>
                <ul class="feature-list">
                    <li><strong>실시간 화면</strong>: tmux 세션의 현재 상태</li>
                    <li><strong>자동 리사이징</strong>: 브라우저 창 크기에 맞게 터미널 크기 조절</li>
                    <li><strong>컬러 지원</strong>: ANSI 이스케이프 코드를 통한 컬러 출력</li>
                </ul>
            </section>

            <section id="keyboard-input" class="docs-section">
                <h2>키보드 입력</h2>

                <h3>기본 입력</h3>
                <p>터미널 영역을 클릭한 후 키보드 입력이 가능합니다:</p>
                <ul class="feature-list">
                    <li>일반 텍스트 입력</li>
                    <li>Enter 키로 명령 실행</li>
                    <li>방향키, Backspace, Delete 등 특수 키</li>
                </ul>

                <h3>Control 키 조합</h3>
                <div class="key-table">
                    <table>
                        <thead>
                            <tr>
                                <th>키</th>
                                <th>기능</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>C</kbd></td>
                                <td>현재 프로세스 중단 (SIGINT)</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>D</kbd></td>
                                <td>EOF 전송 / 쉘 종료</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>Z</kbd></td>
                                <td>프로세스 일시 중지 (SIGTSTP)</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>L</kbd></td>
                                <td>화면 지우기</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>A</kbd></td>
                                <td>줄 시작으로 이동</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>E</kbd></td>
                                <td>줄 끝으로 이동</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>tmux 프리픽스 키</h3>
                <p>tmux의 기본 프리픽스 키는 <kbd>Ctrl</kbd> + <kbd>B</kbd>입니다:</p>
                <div class="key-table">
                    <table>
                        <thead>
                            <tr>
                                <th>키 조합</th>
                                <th>기능</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>c</kbd></td>
                                <td>새 창(window) 생성</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>n</kbd></td>
                                <td>다음 창으로 이동</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>p</kbd></td>
                                <td>이전 창으로 이동</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>%</kbd></td>
                                <td>수직 분할</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>"</kbd></td>
                                <td>수평 분할</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>d</kbd></td>
                                <td>세션에서 분리 (detach)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="warning-box">
                    <h4>주의사항</h4>
                    <p>일부 브라우저 단축키와 충돌할 수 있습니다. 예: <kbd>Ctrl+W</kbd>는 브라우저에서 탭을 닫습니다. 이러한 키는 터미널로 전달되지 않을 수 있습니다.</p>
                </div>
            </section>

            <section id="session-management" class="docs-section">
                <h2>세션 관리</h2>

                <h3>웹에서 세션 생성</h3>
                <p>Web UI에서 새로운 tmux 세션을 생성할 수 있습니다:</p>
                <ol>
                    <li>세션 목록 화면에서 "New Session" 버튼 클릭</li>
                    <li>머신 선택</li>
                    <li>세션 이름 입력</li>
                    <li>"Create" 버튼 클릭</li>
                </ol>
                <p>Agent가 요청을 받아 로컬에서 tmux 세션을 생성합니다.</p>

                <h3>세션 종료</h3>
                <p>세션을 종료하는 방법:</p>
                <ul class="feature-list">
                    <li><strong>웹 UI</strong>: 세션 목록에서 삭제 버튼 클릭</li>
                    <li><strong>터미널</strong>: <code>exit</code> 명령 또는 <kbd>Ctrl+D</kbd></li>
                    <li><strong>tmux 명령</strong>: <code>tmux kill-session -t session-name</code></li>
                </ul>

                <h3>세션 목록 새로고침</h3>
                <p>세션 목록은 자동으로 업데이트되지만, 수동으로 새로고침하려면:</p>
                <ul class="feature-list">
                    <li>세션 목록 화면에서 새로고침 버튼 클릭</li>
                    <li>브라우저 새로고침 (F5)</li>
                </ul>
            </section>

            <section id="troubleshooting" class="docs-section">
                <h2>문제 해결</h2>

                <h3>세션이 목록에 표시되지 않음</h3>
                <div class="troubleshoot-item">
                    <h4>확인사항:</h4>
                    <ol>
                        <li>Agent가 실행 중인지 확인
                            <pre><code>ps aux | grep sessioncast-agent</code></pre>
                        </li>
                        <li>Agent 로그 확인
                            <pre><code>tail -f ~/sessioncast-agent.log</code></pre>
                        </li>
                        <li>tmux 세션이 존재하는지 확인
                            <pre><code>tmux ls</code></pre>
                        </li>
                        <li>Agent Token이 올바른지 확인</li>
                        <li>웹에서 로그인한 이메일이 Token의 owner와 일치하는지 확인</li>
                    </ol>
                </div>

                <h3>화면이 비어있음</h3>
                <div class="troubleshoot-item">
                    <h4>원인:</h4>
                    <p>새로 생성된 tmux 세션은 아직 어떤 명령도 실행되지 않아 빈 화면일 수 있습니다.</p>
                    <h4>해결:</h4>
                    <ol>
                        <li>터미널에서 직접 세션에 접속하여 명령 실행
                            <pre><code>tmux attach -t session-name</code></pre>
                        </li>
                        <li>또는 웹에서 아무 키나 입력하여 화면 갱신 유도</li>
                    </ol>
                </div>

                <h3>키 입력이 전달되지 않음</h3>
                <div class="troubleshoot-item">
                    <h4>확인사항:</h4>
                    <ol>
                        <li>터미널 영역을 클릭하여 포커스가 있는지 확인</li>
                        <li>브라우저 개발자 도구에서 WebSocket 연결 상태 확인</li>
                        <li>Agent 로그에서 키 수신 메시지 확인</li>
                    </ol>
                </div>

                <h3>연결이 자주 끊김</h3>
                <div class="troubleshoot-item">
                    <h4>가능한 원인:</h4>
                    <ul>
                        <li>네트워크 불안정</li>
                        <li>프록시/방화벽 WebSocket 차단</li>
                        <li>서버 리소스 부족</li>
                    </ul>
                    <h4>해결:</h4>
                    <ol>
                        <li>네트워크 연결 상태 확인</li>
                        <li>프록시 설정에서 WebSocket 허용 확인</li>
                        <li>서버 로그 확인:
                            <pre><code>journalctl -u sessioncast -f</code></pre>
                        </li>
                    </ol>
                </div>

                <h3>에이전트 재시작</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>macOS (launchd)</span>
                    </div>
                    <pre class="code-block"><code>launchctl unload ~/Library/LaunchAgents/com.sessioncast.agent.plist
launchctl load ~/Library/LaunchAgents/com.sessioncast.agent.plist</code></pre>
                </div>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Linux (systemd)</span>
                    </div>
                    <pre class="code-block"><code>sudo systemctl restart sessioncast-agent</code></pre>
                </div>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>수동 실행</span>
                    </div>
                    <pre class="code-block"><code># 기존 프로세스 종료
pkill -f sessioncast-agent

# 재시작
nohup java -jar ~/sessioncast-agent.jar > ~/sessioncast-agent.log 2>&1 &</code></pre>
                </div>
            </section>

            <nav class="docs-pagination">
                <a href="install.html" class="prev-link">
                    <span class="arrow">←</span>
                    <span>설치 가이드</span>
                </a>
                <a href="https://github.com/sessioncast" target="_blank" class="next-link">
                    <span>GitHub</span>
                    <span class="arrow">→</span>
                </a>
            </nav>
        </article>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 SessionCast. Released under MIT License. | <a href="mailto:devload@sessioncast.io">문의: devload@sessioncast.io</a></p>
            </div>
            <div class="footer-disclaimer">
                <p>⚠️ 면책 조항: 본 소프트웨어는 어떠한 보증 없이 "있는 그대로" 제공됩니다. 개발자는 본 소프트웨어 사용으로 인한 보안 문제, 데이터 침해 또는 손해에 대해 책임지지 않습니다. 배포 환경의 보안은 사용자의 책임입니다.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script src="../docs.js"></script>
</body>
</html>
