<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usage Guide - SessionCast</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="docs.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <span class="logo-icon">></span>
                <span class="logo-text">SessionCast</span>
            </a>
            <ul class="nav-menu">
                <li><a href="/#features">Features</a></li>
                <li><a href="pricing.html">Pricing</a></li>
                <li><a href="install.html">Installation</a></li>
                <li><a href="guide.html" class="active">Usage Guide</a></li>
                <li><a href="https://github.com/sessioncast" target="_blank" class="nav-github">GitHub</a></li>
                <li class="lang-switch">
                    <a href="guide.html" class="active">EN</a>
                    <a href="ko/guide.html">KO</a>
                </li>
                <li class="nav-console">
                    <a href="https://app.sessioncast.io?lang=en" class="btn-console">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <rect x="2" y="3" width="20" height="14" rx="2"/>
                            <path d="M8 21h8"/>
                            <path d="M12 17v4"/>
                            <path d="M7 8l3 3-3 3"/>
                            <path d="M13 14h4"/>
                        </svg>
                        Console
                    </a>
                </li>
            </ul>
            <button class="nav-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="docs-main">
        <aside class="docs-sidebar">
            <nav class="docs-nav">
                <h3>Usage Guide</h3>
                <ul>
                    <li><a href="#getting-started">Getting Started</a></li>
                    <li><a href="#tmux-sessions">tmux Sessions</a></li>
                    <li><a href="#web-interface">Web Interface</a></li>
                    <li><a href="#keyboard-input">Keyboard Input</a></li>
                    <li><a href="#session-management">Session Management</a></li>
                    <li><a href="#troubleshooting">Troubleshooting</a></li>
                </ul>
            </nav>
        </aside>

        <article class="docs-content">
            <header class="docs-header">
                <h1>Usage Guide</h1>
                <p>Learn how to use SessionCast effectively.</p>
            </header>

            <section id="getting-started" class="docs-section">
                <h2>Getting Started</h2>

                <h3>Basic Workflow</h3>
                <div class="workflow-steps">
                    <div class="workflow-step">
                        <div class="step-icon">1</div>
                        <div class="step-content">
                            <h4>Create tmux Session</h4>
                            <p>Create a tmux session on your local machine.</p>
                            <div class="code-block-wrapper">
                                <pre class="code-block"><code>tmux new -s workspace</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step">
                        <div class="step-icon">2</div>
                        <div class="step-content">
                            <h4>Verify Agent</h4>
                            <p>If the Agent is running, sessions are detected automatically.</p>
                            <div class="code-block-wrapper">
                                <pre class="code-block"><code># Check Agent logs
tail -f ~/sessioncast-agent.log

# Verify session registration message
# Look for "Session 'workspace' registered" output</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step">
                        <div class="step-icon">3</div>
                        <div class="step-content">
                            <h4>Access via Web</h4>
                            <p>Open SessionCast in your browser and sign in with your Google account.</p>
                        </div>
                    </div>

                    <div class="workflow-step">
                        <div class="step-icon">4</div>
                        <div class="step-content">
                            <h4>Select and Use Session</h4>
                            <p>Click on a session from the list to view the terminal.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tmux-sessions" class="docs-section">
                <h2>tmux Sessions</h2>

                <h3>Creating Sessions</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Basic tmux Commands</span>
                    </div>
                    <pre class="code-block"><code># Create new session
tmux new -s session-name

# Create session in background
tmux new -d -s session-name

# Add window to session
tmux new-window -t session-name

# List sessions
tmux ls</code></pre>
                </div>

                <h3>Session Naming Convention</h3>
                <p>In SessionCast, sessions are identified using the <code>machineId/tmuxSession</code> format:</p>
                <ul class="feature-list">
                    <li><code>my-workstation/dev</code> - dev session on my-workstation machine</li>
                    <li><code>server-01/monitoring</code> - monitoring session on server-01 machine</li>
                </ul>

                <h3>Auto-Discovery Mode</h3>
                <p>Setting <code>autoDiscovery: true</code> allows the Agent to automatically detect all tmux sessions:</p>
                <div class="code-block-wrapper">
                    <pre class="code-block"><code># ~/.tmux-remote.yml
machineId: my-workstation
relay: wss://your-server.com/ws
token: agt_your_token
autoDiscovery: true</code></pre>
                </div>

                <div class="info-box">
                    <h4>Excluding from Auto-Discovery</h4>
                    <p>To exclude specific sessions, prefix the session name with <code>_</code> (underscore):</p>
                    <pre><code>tmux new -s _private-session</code></pre>
                </div>
            </section>

            <section id="web-interface" class="docs-section">
                <h2>Web Interface</h2>

                <h3>Login</h3>
                <p>SessionCast uses Google OAuth 2.0:</p>
                <ol>
                    <li>Click the "Sign in with Google" button on the web page</li>
                    <li>Select and authenticate your Google account</li>
                    <li>You'll be automatically redirected to the session list</li>
                </ol>

                <div class="info-box">
                    <h4>Domain Restriction</h4>
                    <p>If the administrator has set <code>ALLOWED_DOMAINS</code>, only emails from those domains can access.</p>
                </div>

                <h3>Session List</h3>
                <p>After login, only sessions registered with your Agent Token are displayed:</p>
                <ul class="feature-list">
                    <li><strong>Session Label</strong>: Configured label or tmux session name</li>
                    <li><strong>Machine ID</strong>: The machine where the session is running</li>
                    <li><strong>Status</strong>: Connected/Disconnected</li>
                </ul>

                <h3>Terminal View</h3>
                <p>Clicking a session displays the terminal screen:</p>
                <ul class="feature-list">
                    <li><strong>Real-time Display</strong>: Current state of the tmux session</li>
                    <li><strong>Auto-resizing</strong>: Terminal adjusts to browser window size</li>
                    <li><strong>Color Support</strong>: Color output via ANSI escape codes</li>
                </ul>
            </section>

            <section id="keyboard-input" class="docs-section">
                <h2>Keyboard Input</h2>

                <h3>Basic Input</h3>
                <p>Click the terminal area to enable keyboard input:</p>
                <ul class="feature-list">
                    <li>Regular text input</li>
                    <li>Execute commands with Enter key</li>
                    <li>Arrow keys, Backspace, Delete and other special keys</li>
                </ul>

                <h3>Control Key Combinations</h3>
                <div class="key-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Key</th>
                                <th>Function</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>C</kbd></td>
                                <td>Interrupt current process (SIGINT)</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>D</kbd></td>
                                <td>Send EOF / Exit shell</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>Z</kbd></td>
                                <td>Suspend process (SIGTSTP)</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>L</kbd></td>
                                <td>Clear screen</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>A</kbd></td>
                                <td>Move to beginning of line</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl</kbd> + <kbd>E</kbd></td>
                                <td>Move to end of line</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>tmux Prefix Key</h3>
                <p>The default tmux prefix key is <kbd>Ctrl</kbd> + <kbd>B</kbd>:</p>
                <div class="key-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Key Sequence</th>
                                <th>Function</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>c</kbd></td>
                                <td>Create new window</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>n</kbd></td>
                                <td>Next window</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>p</kbd></td>
                                <td>Previous window</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>%</kbd></td>
                                <td>Split vertically</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>"</kbd></td>
                                <td>Split horizontally</td>
                            </tr>
                            <tr>
                                <td><kbd>Ctrl+B</kbd> → <kbd>d</kbd></td>
                                <td>Detach from session</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="warning-box">
                    <h4>Note</h4>
                    <p>Some browser shortcuts may conflict. For example, <kbd>Ctrl+W</kbd> closes the browser tab. These keys may not be passed to the terminal.</p>
                </div>
            </section>

            <section id="session-management" class="docs-section">
                <h2>Session Management</h2>

                <h3>Creating Sessions from Web</h3>
                <p>You can create new tmux sessions from the Web UI:</p>
                <ol>
                    <li>Click "New Session" button on the session list screen</li>
                    <li>Select a machine</li>
                    <li>Enter session name</li>
                    <li>Click "Create" button</li>
                </ol>
                <p>The Agent receives the request and creates the tmux session locally.</p>

                <h3>Terminating Sessions</h3>
                <p>Ways to terminate a session:</p>
                <ul class="feature-list">
                    <li><strong>Web UI</strong>: Click delete button in session list</li>
                    <li><strong>Terminal</strong>: <code>exit</code> command or <kbd>Ctrl+D</kbd></li>
                    <li><strong>tmux command</strong>: <code>tmux kill-session -t session-name</code></li>
                </ul>

                <h3>Refreshing Session List</h3>
                <p>The session list updates automatically, but to refresh manually:</p>
                <ul class="feature-list">
                    <li>Click refresh button on the session list screen</li>
                    <li>Browser refresh (F5)</li>
                </ul>
            </section>

            <section id="troubleshooting" class="docs-section">
                <h2>Troubleshooting</h2>

                <h3>Session Not Showing in List</h3>
                <div class="troubleshoot-item">
                    <h4>Checklist:</h4>
                    <ol>
                        <li>Check if Agent is running
                            <pre><code>ps aux | grep sessioncast-agent</code></pre>
                        </li>
                        <li>Check Agent logs
                            <pre><code>tail -f ~/sessioncast-agent.log</code></pre>
                        </li>
                        <li>Verify tmux session exists
                            <pre><code>tmux ls</code></pre>
                        </li>
                        <li>Verify Agent Token is correct</li>
                        <li>Verify logged-in email matches Token owner</li>
                    </ol>
                </div>

                <h3>Empty Screen</h3>
                <div class="troubleshoot-item">
                    <h4>Cause:</h4>
                    <p>Newly created tmux sessions may show an empty screen if no commands have been executed yet.</p>
                    <h4>Solution:</h4>
                    <ol>
                        <li>Attach to the session directly from terminal and run a command
                            <pre><code>tmux attach -t session-name</code></pre>
                        </li>
                        <li>Or press any key in the web interface to trigger a screen refresh</li>
                    </ol>
                </div>

                <h3>Keyboard Input Not Working</h3>
                <div class="troubleshoot-item">
                    <h4>Checklist:</h4>
                    <ol>
                        <li>Click the terminal area to ensure it has focus</li>
                        <li>Check WebSocket connection status in browser developer tools</li>
                        <li>Check Agent logs for key input messages</li>
                    </ol>
                </div>

                <h3>Frequent Disconnections</h3>
                <div class="troubleshoot-item">
                    <h4>Possible Causes:</h4>
                    <ul>
                        <li>Unstable network connection</li>
                        <li>Proxy/firewall blocking WebSocket</li>
                        <li>Server resource shortage</li>
                    </ul>
                    <h4>Solution:</h4>
                    <ol>
                        <li>Check network connection status</li>
                        <li>Verify WebSocket is allowed in proxy settings</li>
                        <li>Check server logs:
                            <pre><code>journalctl -u sessioncast -f</code></pre>
                        </li>
                    </ol>
                </div>

                <h3>Restarting the Agent</h3>
                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>macOS (launchd)</span>
                    </div>
                    <pre class="code-block"><code>launchctl unload ~/Library/LaunchAgents/com.sessioncast.agent.plist
launchctl load ~/Library/LaunchAgents/com.sessioncast.agent.plist</code></pre>
                </div>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Linux (systemd)</span>
                    </div>
                    <pre class="code-block"><code>sudo systemctl restart sessioncast-agent</code></pre>
                </div>

                <div class="code-block-wrapper">
                    <div class="code-header">
                        <span>Manual Execution</span>
                    </div>
                    <pre class="code-block"><code># Kill existing process
pkill -f sessioncast-agent

# Restart
nohup java -jar ~/sessioncast-agent.jar > ~/sessioncast-agent.log 2>&1 &</code></pre>
                </div>
            </section>

            <nav class="docs-pagination">
                <a href="install.html" class="prev-link">
                    <span class="arrow">←</span>
                    <span>Installation</span>
                </a>
                <a href="https://github.com/sessioncast" target="_blank" class="next-link">
                    <span>GitHub</span>
                    <span class="arrow">→</span>
                </a>
            </nav>
        </article>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 SessionCast. Released under MIT License.</p>
            </div>
            <div class="footer-disclaimer">
                <p>⚠️ Disclaimer: This software is provided "AS IS" without warranty. The developers are not responsible for any security issues, data breaches, or damages arising from use of this software. Users are solely responsible for securing their deployments.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="docs.js"></script>
</body>
</html>
